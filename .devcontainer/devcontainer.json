// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
{
	"name": "webdriver-precore",
	"image": "ghcr.io/pyrethrum/webdriver-precore-firefox:latest",

	// copy the compiled library files from dist-newstyle into the current working directory
	// if the dist-newstyle directory does not already exist  this does not work
	// cabal is too clever about cache invalidation and rebuild anyway
	// "postCreateCommand": "[ ! -d ./dist-newstyle ] && cp -r ~/dist-newstyle ./",
	// Configure tool-specific properties.devco
	// "customizations": {},
	"remoteUser": "vscode",
	"containerUser": "vscode",

	// X11 forwarding for headed browser testing
	"runArgs": [
		"-e", "DISPLAY=${localEnv:DISPLAY}",
		"-v", "/tmp/.X11-unix:/tmp/.X11-unix:rw"
	],

	"postStartCommand": "bash ./dev/container-start.sh",
	"postAttachCommand": "bash ./dev/container-attach.sh",
	
	

	"customizations": {
		"vscode": {
			"extensions": [
				"alefragnani.Bookmarks",
				"nemesv.copy-file-name",
				"mrmlnc.vscode-duplicate",
				"sleistner.vscode-fileutils",
				"huizhou.githd",
				"donjayamanne.githistory",
				"eamodio.gitlens",
				"haskell.haskell",
				"justusadam.language-haskell",
				"ms-vsliveshare.vsliveshare-pack",
				"christian-kohler.path-intellisense",
				"kylepaulsen.stack-tabs",
				"andyyaldoo.vscode-json",
				"redhat.vscode-yaml",
				"bee.git-temporal-vscode",
				"SanaAjani.taskrunnercode",
				"ms-azuretools.vscode-containers"
			]
		}
	}
}